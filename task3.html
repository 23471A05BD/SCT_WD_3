 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Advanced Tic-Tac-Toe</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #111;
      color: white;
      text-align: center;
      padding: 2rem;
    }

    .game-board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 10px;
      justify-content: center;
      margin: 20px auto;
    }

    .cell {
      width: 100px;
      height: 100px;
      font-size: 2.5rem;
      background: #1e1e1e;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      border-radius: 8px;
      position: relative;
      transition: background 0.3s;
    }

    .cell:hover {
      background: #333;
    }

    .cell.win {
      background-color: #4caf50;
    }

    .cell::after {
      content: "";
      position: absolute;
      background: yellow;
    }

    .line-horizontal::after {
      width: 100%;
      height: 4px;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
    }

    .line-vertical::after {
      height: 100%;
      width: 4px;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
    }

    .line-diagonal-1::after {
      height: 4px;
      width: 140%;
      top: 50%;
      left: -20%;
      transform: rotate(45deg);
      transform-origin: center;
    }

    .line-diagonal-2::after {
      height: 4px;
      width: 140%;
      top: 50%;
      left: -20%;
      transform: rotate(-45deg);
      transform-origin: center;
    }

    .controls {
      margin-bottom: 1rem;
    }

    button, select {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin: 0.5rem;
      background-color: #444;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover, select:hover {
      background-color: #666;
    }

    .info {
      font-size: 1.2rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <h1>Tic-Tac-Toe</h1>

  <div class="controls">
    <label for="mode">Play Mode:</label>
    <select id="mode">
      <option value="human">Player vs Player</option>
      <option value="bot">Player vs Bot (Smart)</option>
    </select>
    <button onclick="restartGame()">Restart</button>
  </div>

  <div class="game-board" id="gameBoard"></div>
  <div class="info" id="gameInfo">Turn: X</div>

  <script>
    const boardElement = document.getElementById('gameBoard');
    const infoElement = document.getElementById('gameInfo');
    const modeSelect = document.getElementById('mode');

    let board = Array(9).fill(null);
    let isXTurn = true;
    let gameOver = false;

    const winPatterns = [
      [0, 1, 2, 'horizontal'], [3, 4, 5, 'horizontal'], [6, 7, 8, 'horizontal'],
      [0, 3, 6, 'vertical'], [1, 4, 7, 'vertical'], [2, 5, 8, 'vertical'],
      [0, 4, 8, 'diagonal-1'], [2, 4, 6, 'diagonal-2']
    ];

    function startGame() {
      boardElement.innerHTML = '';
      board.forEach((_, index) => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.addEventListener('click', () => handleClick(index));
        boardElement.appendChild(cell);
      });
    }

    function handleClick(index) {
      if (board[index] || gameOver) return;

      board[index] = isXTurn ? 'X' : 'O';
      updateBoard();
      const win = checkWinner();
      if (win) return;

      isXTurn = !isXTurn;
      infoElement.textContent = `Turn: ${isXTurn ? 'X' : 'O'}`;

      if (modeSelect.value === 'bot' && !isXTurn && !gameOver) {
        setTimeout(botMoveSmart, 400);
      }
    }

    function updateBoard() {
      const cells = boardElement.querySelectorAll('.cell');
      board.forEach((val, i) => {
        cells[i].textContent = val;
      });
    }

    function checkWinner() {
      for (let [a, b, c, type] of winPatterns) {
        if (board[a] && board[a] === board[b] && board[a] === board[c]) {
          gameOver = true;
          infoElement.textContent = `ðŸŽ‰ Winner: ${board[a]}!`;
          const cells = boardElement.querySelectorAll('.cell');
          cells[a].classList.add('win', `line-${type}`);
          cells[b].classList.add('win', `line-${type}`);
          cells[c].classList.add('win', `line-${type}`);
          return board[a];
        }
      }

      if (!board.includes(null)) {
        gameOver = true;
        infoElement.textContent = "It's a Draw!";
        return "Draw";
      }

      return null;
    }

    function botMoveSmart() {
      const bestMove = findBestMove(board);
      handleClick(bestMove);
    }

    function findBestMove(currentBoard) {
      let bestScore = -Infinity;
      let move;

      for (let i = 0; i < 9; i++) {
        if (!currentBoard[i]) {
          currentBoard[i] = 'O';
          let score = minimax(currentBoard, 0, false);
          currentBoard[i] = null;
          if (score > bestScore) {
            bestScore = score;
            move = i;
          }
        }
      }

      return move;
    }

    function minimax(newBoard, depth, isMaximizing) {
      const result = evaluate(newBoard);
      if (result !== null) return result;

      if (isMaximizing) {
        let best = -Infinity;
        for (let i = 0; i < 9; i++) {
          if (!newBoard[i]) {
            newBoard[i] = 'O';
            best = Math.max(best, minimax(newBoard, depth + 1, false));
            newBoard[i] = null;
          }
        }
        return best;
      } else {
        let best = Infinity;
        for (let i = 0; i < 9; i++) {
          if (!newBoard[i]) {
            newBoard[i] = 'X';
            best = Math.min(best, minimax(newBoard, depth + 1, true));
            newBoard[i] = null;
          }
        }
        return best;
      }
    }

    function evaluate(b) {
      for (let [a, b1, c] of winPatterns) {
        if (b[a] && b[a] === b[b1] && b[a] === b[c]) {
          return b[a] === 'O' ? 1 : -1;
        }
      }

      if (!b.includes(null)) return 0; // Draw

      return null; // Game not over
    }

    function restartGame() {
      board = Array(9).fill(null);
      isXTurn = true;
      gameOver = false;
      infoElement.textContent = 'Turn: X';
      startGame();
    }

    startGame();
  </script>

</body>
</html>
